
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>GrowIndia Jobs â€” Login</title>
  <link rel="stylesheet" href="/app.css"/>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/config.js?v=1"></script>
  <script src="/components.js?v=1"></script>
</head>
<body>
  <header class="header"><nav><a class="brand" href="/jobs.html">GrowIndia Jobs</a><div class="nav"><a class="btn ghost" href="/jobs.html">Browse Jobs</a></div></nav></header>
  <div class="container">
    <p class="kicker">Welcome back</p>
    <h1 class="h1">Sign in to post jobs and manage your company.</h1>

    <form id="loginForm" class="card grid">
      <label>Email
        <input id="email" class="input" type="email" placeholder="you@example.com" required/>
      </label>
      <button class="btn primary" type="submit">Send magic link</button>
      <div id="msg" class="muted"></div>
    </form>
  </div>

<script>
const form = document.getElementById("loginForm");
const msg = document.getElementById("msg");
form.addEventListener("submit", async (e)=>{
  e.preventDefault();
  msg.textContent = "";
  const email = document.getElementById("email").value.trim();
  try{
    const redirectTo = `${location.origin}/post-auth.html`;
    const { error } = await sbAuth.signInWithOtp({ email, options: { emailRedirectTo: redirectTo }});
    if(error) throw error;
    msg.textContent = "Check your email for the sign-in link.";
  }catch(err){
    msg.textContent = "Error: " + (err.message || err);
  }
});
</script>
</body>
</html>
