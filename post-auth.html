
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Post Auth</title>
  <link rel="stylesheet" href="/assets/app.css"/>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/config.js?v=1"></script>
  <script src="/assets/components.js"></script>
</head>
<body>
  <div class="container" style="padding-top:30px">
    <h1 class="page-title">You’re signed in</h1>
    <div class="card">
      <div class="row" id="status"><span class="badge">Loading…</span></div>
      <div class="row" style="margin-top:10px">
        <a class="btn primary" href="/employer.html">Go to Employer</a>
        <a class="btn" href="/admin.html">Go to Admin</a>
        <a class="btn ghost" href="/jobs.html">Browse Jobs</a>
        <button class="btn" id="logoutBtn">Logout</button>
      </div>
    </div>
  </div>
<script>
document.addEventListener("DOMContentLoaded", async ()=>{
  const s=await GI.getSession(); const admin=await GI.isAdmin();
  GI.header(s?.user, admin);
  document.getElementById("logoutBtn").addEventListener("click", async ()=>{ await sbAuth.signOut(); location.href="/index.html"; });
  const row=document.getElementById("status");
  if(s){ row.innerHTML=`<span class="badge">Signed in as</span> <strong>${s.user.email}</strong> ${admin?'<span class="badge">Admin</span>':''}`; } else { row.innerHTML="<span class='badge'>No active session</span>"; }
});
</script>
</body>
</html>
